(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else if(typeof exports==="object"){module.exports=b()}else{a.store=b()}})(this,function(a,b){if(!window.localStorage)return;var c=window.localStorage,d,e;function f(a){return typeof a==="object"&&Object.prototype.toString.call(a).toLowerCase()&&!a.length}function g(a){return a===b||typeof a==="function"?a+"":JSON.stringify(a)}function h(a){if(typeof a!=="string"){return b}try{return JSON.parse(a)}catch(c){return a||b}}function i(a){return{}.toString.call(a)==="[object Function]"}function j(a){return typeof a==="string"}function k(a){return a instanceof Array}e={set:function(a,d){if(d===b){return this.remove(a)}c.setItem(a,g(d));return d},setAll:function(a){var b,c;for(var d in a){c=a[d];if(this.set(d,c)!==c){b=true}}return b},get:function(a){return h(c.getItem(a))},getAll:function(){var a={};this.forEach(function(b,c){a[b]=c});return a},clear:function(){return c.clear()},remove:function(a){var b=this.get(a);c.removeItem(a);return b},has:function(a){return c.hasOwnProperty(a)},keys:function(){var a=[];this.forEach(function(b,c){a.push(b)});return a},size:function(){return this.keys().length},forEach:function(a){for(var b=0;b<c.length;b++){var d=c.key(b);if(a(d,this.get(d))===false)break}}};d=function(a,c){var e=arguments,g=null,h=function(a,c){if(i(c)){if(j(a)){g=c(d.get(a));return g?d.set(a,g):b}if(k(a))for(var h in a){g=c(d.get(a[h]));if(g)d.set(a[h],g)}return}if(f(a))return d.setAll(a);if(e.length===0){return d.getAll()}if(c===false){return d.remove(a)}if(c!==b){return d.set(a,c)}if(a){return d.get(a)}return d.setAll(a,c)};return h(a,c)};for(var l in e)d[l]=e[l];return d});